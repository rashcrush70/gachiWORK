<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{url_for('static', filename='css/main.css')}}" rel="stylesheet"/>
    <title>Car Parts Shop</title>
</head>
<body>
    <header>
        <h1>Car Parts Shop</h1>
    </header>

    <div id="navbar">
        <a href="#" onclick="showCatalog()">Catalog</a>
        <!-- Add a Catalog button to the navigation bar -->
    </div>

    <section id="catalog-container" style="display:none;">
        <h2>Car Brands Catalog</h2>
        <ul id="car-brands">
            <li onclick="showProducts('Toyota')">Toyota</li>
            <li onclick="showProducts('Ford')">Ford</li>
            <li onclick="showProducts('Honda')">Honda</li>
            <li onclick="showProducts('Nissan')">Nissan</li>
            <li onclick="showProducts('Subaru')">Subaru</li>
            <!-- Add more car brands as needed -->
        </ul>
    </section>
    
    <div id="products-container">
        <div class="product">
            <h3>Engine Oil</h3>
            <p>$25.99</p>
            <button onclick="addToCart(1, 'Engine Oil', 25.99)">Add to Cart</button>
        </div>
        <div class="product">
            <h3>Brake Pads</h3>
            <p>$35.99</p>
            <button onclick="addToCart(2, 'Brake Pads', 35.99)">Add to Cart</button>
        </div>
        <div class="product">
            <h3>Air Filter</h3>
            <p>$12.99</p>
            <button onclick="addToCart(3, 'Air Filter', 12.99)">Add to Cart</button>
        </div>
    </div>

    <div id="cart-container" style="display:none;">
        <h2>Shopping Cart</h2>
        <ul id="cart"></ul>
        <p>Total: $<span id="total">0.00</span></p>
        <button onclick="checkout()">Checkout</button>
    </div>

    <div id="cart-button-container">
        <button onclick="toggleCart()">View Cart</button>
    </div>

    <footer>
        <p>&copy; 2023 Car Parts Shop</p>
    </footer>

    <script>
        // Sample cart data
        const cart = [];

        // Sample catalog data
        const catalog = {
            Toyota: [
                { id: 1, name: 'Toyota Engine Oil', price: 25.99 },
                { id: 2, name: 'Toyota Brake Pads', price: 35.99 },
                // Add more Toyota products as needed
            ],
            Ford: [
                { id: 3, name: 'Ford Engine Oil', price: 28.99 },
                { id: 4, name: 'Ford Brake Pads', price: 38.99 },
                // Add more Ford products as needed
            ],
            Honda: [
                { id: 5, name: 'Honda Engine Oil', price: 22.99 },
                { id: 6, name: 'Honda Brake Pads', price: 32.99 },
                // Add more Honda products as needed
            ],
            Nissan: [
                { id: 7, name: 'Nissan Engine Oil', price: 23.99 },
                { id: 8, name: 'Nissan Brake Pads', price: 34.99 },
            ],
            Subaru: [
                { id: 9, name: 'Subaru Engine Oil', price: 21.99 },
                { id: 10, name: 'Subaru Brake Pads', price: 32.99 },
            ],
        };

        // Function to add a product to the cart
        function addToCart(productId, name, price) {
            const product = {
                id: productId,
                name: name,
                price: price
                // Add other product details as needed
            };
            cart.push(product);
            updateCart();
        }

        // Function to remove a product from the cart
        function removeFromCart(productId) {
            const index = cart.findIndex(item => item.id === productId);
            if (index !== -1) {
                cart.splice(index, 1);
                updateCart();
            }
        }

        // Function to update the cart display
        function updateCart() {
            // Implement your cart update logic here
            console.log(cart);
            updateCartDisplay();
        }

        // Function to toggle between product and cart sections
        function toggleCart() {
            const productsContainer = document.getElementById('products-container');
            const cartContainer = document.getElementById('cart-container');
            const cartButtonContainer = document.getElementById('cart-button-container');

            // Toggle visibility
            if (productsContainer.style.display === 'block') {
                productsContainer.style.display = 'none';
                cartContainer.style.display = 'block';
                updateCartDisplay(); // Show the cart contents when switching to the cart view
            } else {
                productsContainer.style.display = 'block';
                cartContainer.style.display = 'none';
            }
        }

        // Function to update the cart display
        function updateCartDisplay() {
            const cartContainer = document.getElementById('cart');

            // Clear previous cart items
            cartContainer.innerHTML = '';

            // Check if there are items in the cart
            if (cart.length > 0) {
                // Display each item in the cart
                cart.forEach(item => {
                    const cartItem = document.createElement('li');
                    cartItem.textContent = `${item.name} - $${item.price.toFixed(2)}`;
                    
                    // Add remove button
                    const removeButton = document.createElement('button');
                    removeButton.textContent = 'Remove';
                    removeButton.onclick = () => removeFromCart(item.id);
                    cartItem.appendChild(removeButton);

                    cartContainer.appendChild(cartItem);
                });

                // Calculate and display the total
                const totalPrice = cart.reduce((total, item) => total + item.price, 0);
                document.getElementById('total').textContent = totalPrice.toFixed(2);
            }
        }

        // Function to display products for a selected car brand
        function updateNavbarSelection(brand) {
            const navbarLinks = document.getElementById('navbar').getElementsByTagName('a');
            for (let i = 0; i < navbarLinks.length; i++) {
                navbarLinks[i].classList.remove('selected');
            }
            document.querySelector(`#navbar a:contains('${brand}')`).classList.add('selected');
        }

        // Modified function to show products for a selected car brand
        function showProducts(brand) {
            const productsContainer = document.getElementById('products-container');
            const catalogProducts = catalog[brand];

            // Clear previous products
            productsContainer.innerHTML = '';

            // Display products for the selected brand
            if (catalogProducts) {
                catalogProducts.forEach(product => {
                    const productItem = document.createElement('div');
                    productItem.className = 'product';
                    productItem.innerHTML = `
                        <h3>${product.name}</h3>
                        <p>$${product.price.toFixed(2)}</p>
                        <button onclick="addToCart(${product.id}, '${product.name}', ${product.price})">Add to Cart</button>
                    `;
                    productsContainer.appendChild(productItem);
                });
            }

            // Show the products container
            productsContainer.style.display = 'block';

            // Update selected styling in the catalog
            updateNavbarSelection(brand);
        }

        function checkout() {
            alert('Thank you for your purchase!');
            cart.length = 0; // Clear the cart
            updateCart();
            toggleCart(); // Hide the cart display after checkout
        }

        // Helper function to check if an element contains specific text
        function containsText(element, text) {
            return element.innerText.toLowerCase().includes(text.toLowerCase());
        }

        function showCatalog() {
            const catalogContainer = document.getElementById('catalog-container');
            const productsContainer = document.getElementById('products-container');

            // Toggle visibility
            if (catalogContainer.style.display === 'block') {
                catalogContainer.style.display = 'none';
                productsContainer.style.display = 'block';
            } else {
                catalogContainer.style.display = 'block';
                productsContainer.style.display = 'none';
            }

            // Update selected styling in the navigation bar
            const navbarLinks = document.getElementById('navbar').getElementsByTagName('a');
            for (let i = 0; i < navbarLinks.length; i++) {
                navbarLinks[i].classList.remove('selected');
            }
            document.querySelector(`#navbar a:contains('Catalog')`).classList.add('selected');
        }
    </script>
</body>
</html>
